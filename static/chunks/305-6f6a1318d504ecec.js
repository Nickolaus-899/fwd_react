(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{218:function(e,t,n){"use strict";n.d(t,{$o:function(){return i},Ef:function(){return N},Ep:function(){return j},HT:function(){return C},Il:function(){return s},Z3:function(){return h},bK:function(){return r},gZ:function(){return v},i4:function(){return f},jq:function(){return m},lo:function(){return g},m6:function(){return l},rc:function(){return a},sO:function(){return p},uN:function(){return d},vw:function(){return u},x3:function(){return c},zW:function(){return o},zk:function(){return x}});let r={restaurant:"",cuisine:""},a={id:0,title:"dish",price:0,calories:0,vegetarian:!1,cuisine:"",img:"",link:""},s=[],o={id:0,token:"",email:"",admin:!1,admin_info:r,dishes:s},l="add_dish",i="confirm",c="add_to_menu",u="auth_fail",d="auth_not_done",h="different_passwords",x="auth_completed",m="log_out",p="delete_acc",j="change_password",C=()=>{},v="userInfo",f=1e3,g=6,N=20},2859:function(e,t,n){"use strict";function r(e,t){let n=0,r="";for(let a=0;a<e.length;a++)r+=function(e){let t="",n=e;for(;n>0;){let e=n%16;t=e<10?(n%16).toString()+t:String.fromCharCode(e+55)+t,n=Math.floor(n/16)}return t}(e.charCodeAt(a)+t.charCodeAt(n)),(n+=1)===t.length&&(n=0);return r}function a(e,t){let n=0,r="";for(let a=0;a<e.length;a+=2){let s=parseInt(e[a]+e[a+1],16);s-=t.charCodeAt(n),r+=String.fromCharCode(s),(n+=1)===t.length&&(n=0)}return r}n.d(t,{Q:function(){return r},T:function(){return a}})},4622:function(e,t,n){"use strict";n.d(t,{ZF:function(){return k},$H:function(){return N},Cp:function(){return T},oT:function(){return I},rQ:function(){return g},CG:function(){return w}});var r=n(218),a=n(5326),s=n.n(a),o=n(1313),l=n(6936),i=n(2040);let c={apiKey:i.env.NEXT_PUBLIC_API_KEY,authDomain:i.env.NEXT_PUBLIC_AUTH_DOMAIN,projectId:i.env.NEXT_PUBLIC_PROJECT_ID,storageBucket:i.env.NEXT_PUBLIC_STORAGE_BUCKET,messagingSenderId:i.env.NEXT_PUBLIC_MESSAGING_SENDER_ID,appId:i.env.NEXT_PUBLIC_APP_ID},u=(0,o.ZF)(c),d=(0,l.ad)(u);async function h(){let e=(0,l.hJ)(d,"clients"),t=await (0,l.PL)(e);return t.docs}async function x(){let e=(0,l.hJ)(d,"clients"),t=await (0,l.PL)(e);return t.docs.map(e=>e.data())}async function m(e){let t=(0,l.hJ)(d,"clients"),n=await (0,l.PL)(t);return Object.keys(n.docs.map(e=>e.data())[0]).length,await (0,l.ET)(t,e),await x()}async function p(e,t){let n=await h(),r=!0;return n.map(n=>{r&&n.data().token===e&&(r=!1,(0,l.r7)(n.ref,{dishes:[...n.data().dishes,t]}))}),await x()}async function j(e,t){let n=await h(),r=!0;return n.map(n=>{r&&n.data().token===e&&(r=!1,(0,l.r7)(n.ref,{dishes:n.data().dishes.filter(e=>e.id!==t.id)}))}),await x()}async function C(e){let t=await h(),n=!0;return t.map(t=>{n&&t.data().token===e.token&&(n=!1,(0,l.oe)(t.ref))}),await x()}async function v(e,t){let n=await h(),r=!0;return n.map(n=>{r&&n.data().token===e&&(r=!1,(0,l.r7)(n.ref,{token:t}))}),await x()}var f=n(2859);async function g(){console.log("Fetching data...");let e=await x();return e}async function N(e,t){console.log("Adding dish..."),t.price=parseInt(t.price.toString()),t.calories=parseInt(t.calories.toString()),t.id=s()().unix();let n=await p(e.token,t);return n}async function I(e,t){console.log("Removing dish...");let n=await j(e.token,t);return n}async function k(e){console.log("Adding new client...");let t=await m(e);return t}async function w(e){console.log("Removing client...");let t=await C(e);return t}async function T(e){console.log("Changing password...");let t=JSON.parse(localStorage.getItem(r.gZ)),n=(0,f.Q)(t.name,e),a=await v(t.token,n),s={token:n,name:t.name,admin:t.admin};return localStorage.setItem(r.gZ,JSON.stringify(s)),a}},2305:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(9268),a=n(6006);n(4535);var s=n(218),o=n(2805),l=n(8945);function i(){let e=(0,o._)(["\n  svg {\n    g {\n      fill: ",";\n    }\n  }\n"]);return i=function(){return e},e}let c=(0,l.ZP)("div")(i(),e=>e.$active?"green":"black");var u=e=>{let{active:t}=e;return(0,r.jsx)(c,{$active:t,children:(0,r.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1280.000000 1185.000000",className:"CheckMark",children:(0,r.jsx)("g",{transform:"translate(0.000000,1185.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,r.jsx)("path",{d:"M12595 11778 c-798 -464 -1551 -977 -2329 -1587 -2298 -1802 -4607 -4276 -6680 -7159 -49 -67 -92 -122 -97 -122 -5 0 -753 420 -1662 934 -908 513 -1666 940 -1683 949 l-30 15 -42 -51 c-35 -44 -39 -54 -28 -67 7 -8 919 -1066 2025 -2350 1826 -2118 2015 -2335 2044 -2338 l32 -3 232 463 c1660 3307 3383 5918 5493 8323 793 905 1778 1912 2655 2714 105 95 201 184 214 197 l24 22 -37 51 c-21 28 -43 51 -49 51 -7 -1 -43 -19 -82 -42z"})})})})};function d(){let e=(0,o._)(["\n  div {\n    color: ",";\n  }\n"]);return d=function(){return e},e}let h=(0,l.ZP)("div")(d(),e=>e.$active?"red":"black");var x=e=>{let{active:t}=e;return(0,r.jsx)(h,{$active:t,children:(0,r.jsx)("div",{className:"CrossRefuse",children:"X"})})},m=e=>{let{dish:t}=e,[n,s]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),[i,c]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t.vegetarian=o},[o,t]),(0,r.jsxs)("div",{className:"VeggieChooseWrapper",children:[(0,r.jsx)("a",{onClick:()=>{s(!0),l(!0),c(!1)},children:(0,r.jsx)(u,{active:n&&o})}),(0,r.jsx)("a",{onClick:()=>{s(!0),c(!0),l(!1)},children:(0,r.jsx)(x,{active:n&&i})})]})},p=e=>{let{changeEventHandler:t,createDishHandler:n,closeFormHandler:a,dish:s}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"InputCustom",children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Food name:"}),(0,r.jsx)("input",{onChange:e=>t(e.target.value,"title"),placeholder:"Name",className:"WhiteColorForInputText"})]}),(0,r.jsxs)("div",{className:"InputCustom",children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Price:"}),(0,r.jsx)("input",{type:"number",onChange:e=>t(e.target.value,"price"),placeholder:"Price",className:"WhiteColorForInputText"})]}),(0,r.jsxs)("div",{className:"InputCustom",children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Calories:"}),(0,r.jsx)("input",{type:"number",onChange:e=>t(e.target.value,"calories"),placeholder:"Calories",className:"WhiteColorForInputText"})]}),(0,r.jsxs)("div",{className:"InputCustom",children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Is it vegetarian?"}),(0,r.jsx)(m,{dish:s})]}),(0,r.jsxs)("div",{className:"InputCustom",children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Cuisine:"}),(0,r.jsx)("input",{value:s.cuisine,onChange:e=>t(e.target.value,"cuisine"),placeholder:"Cuisine",className:"WhiteColorForInputText"})]}),(0,r.jsxs)("div",{className:"InputCustom",children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Link to image:"}),(0,r.jsx)("input",{onChange:e=>t(e.target.value,"img"),placeholder:"URL",className:"WhiteColorForInputText"})]}),(0,r.jsxs)("div",{className:"InputCustom",children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Link to the dish:"}),(0,r.jsx)("input",{onChange:e=>t(e.target.value,"link"),placeholder:"URL",className:"WhiteColorForInputText"})]}),(0,r.jsxs)("div",{className:"ButtonsWrapper",children:[(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{n()},children:"Add"}),(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{a()},children:"Cancel"})]})]})},j=e=>{let{closeFormHandler:t,deleteDishHandler:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Do you really want to delete this dish?"}),(0,r.jsxs)("div",{className:"ButtonsWrapper",children:[(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{n()},children:"Delete"}),(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{t()},children:"Cancel"})]})]})},C=e=>{let{addToMenuHandler:t,closeFormHandler:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Do you really want to add this dish to your menu?"}),(0,r.jsxs)("div",{className:"ButtonsWrapper",children:[(0,r.jsx)("a",{children:(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{t()},children:"Add"})}),(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{n()},children:"Cancel"})]})]})},v=e=>{let{closeFormHandler:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Authentication was failed! Please, check your input data"}),(0,r.jsx)("div",{className:"ButtonsWrapper",children:(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{t()},children:"Close"})})]})},f=e=>{let{closeFormHandler:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"You are not logged in!"}),(0,r.jsxs)("div",{className:"ButtonsWrapper",children:[(0,r.jsx)("a",{href:"/auth",children:(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{t()},children:"Log In"})}),(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{t()},children:"Close"})]})]})},g=e=>{let{closeFormHandler:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Passwords should be the same!"}),(0,r.jsx)("div",{className:"ButtonsWrapper",children:(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{t()},children:"Close"})})]})},N=e=>{let{closeFormHandler:t}=e,n=localStorage.getItem(s.gZ),a="/auth";if(n){let e=JSON.parse(localStorage.getItem(s.gZ));a="/auth/".concat(e.admin?"admin":"user","/").concat(e.token)}else console.log("No info in local storage");return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"WhiteColorForInputText CompletedPosition",children:"Success!"}),(0,r.jsxs)("div",{className:"ButtonsWrapper",children:[(0,r.jsx)("a",{href:a,children:(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{t()},children:"Go to account"})}),(0,r.jsx)("a",{href:"/",children:(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{t()},children:"Go to home page"})})]})]})},I=e=>{let{closeFormHandler:t,logOutHandler:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Do you really want to log out?"}),(0,r.jsxs)("div",{className:"ButtonsWrapper",children:[(0,r.jsx)("a",{href:"/auth",children:(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{n()},children:"Log Out"})}),(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{t()},children:"Cancel"})]})]})},k=e=>{let{closeFormHandler:t,deleteAccHandler:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Do you really want to delete your account?"}),(0,r.jsxs)("div",{className:"ButtonsWrapper",children:[(0,r.jsx)("a",{children:(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{n(),setTimeout(function(){window.location.href="/auth"},s.i4)},children:"Delete"})}),(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{t()},children:"Cancel"})]})]})},w=n(2859),T=n(4622),F=e=>{let{closeFormHandler:t}=e,[n,o]=(0,a.useState)(""),[l,i]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)("");async function x(){let e=JSON.parse(localStorage.getItem(s.gZ));h(""),u("");let r=!1,a=!1;(0,w.T)(e.token,n)!==e.name&&(u("incorrect!"),o(""),r=!0),l.length<s.lo&&(h("too short!"),i(""),a=!0),l.length>s.Ef&&(h("too long!"),i(""),a=!0),r||a||(await (0,T.Cp)(l),setTimeout(function(){let t=(0,w.Q)(e.name,l);window.location.href="/auth/".concat(e.admin?"admin":"user","/").concat(t)},s.i4),t())}return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"InputCustom",children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"Old Password:"}),(0,r.jsx)("input",{type:"password",onChange:e=>o(e.target.value),placeholder:c,value:n,className:"WhiteColorForInputText"})]}),(0,r.jsxs)("div",{className:"InputCustom",children:[(0,r.jsx)("div",{className:"WhiteColorForInputText",children:"New Password:"}),(0,r.jsx)("input",{type:"password",onChange:e=>i(e.target.value),placeholder:d,value:l,className:"WhiteColorForInputText"})]}),(0,r.jsxs)("div",{className:"ButtonsWrapper",children:[(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{x().then()},children:"Change"}),(0,r.jsx)("button",{className:"ExtraButton",onClick:()=>{t()},children:"Cancel"})]})]})},E=e=>{let{type:t,setIsOpenForm:n,changeEventHandler:a,createDishHandler:o,closeFormHandler:l,deleteHandler:i,dish:c,addToMenuHandler:u}=e;return(0,r.jsx)("div",{className:"FormPositionWrapper",onClick:()=>n(!1),children:(0,r.jsxs)("div",{className:"FormWrapper",onClick:e=>e.stopPropagation(),children:[t===s.m6?(0,r.jsx)(p,{changeEventHandler:a,createDishHandler:o,closeFormHandler:l,dish:c}):null,t===s.$o?(0,r.jsx)(j,{closeFormHandler:l,deleteDishHandler:i}):null,t===s.x3?(0,r.jsx)(C,{addToMenuHandler:u,closeFormHandler:l}):null,t===s.vw?(0,r.jsx)(v,{closeFormHandler:l}):null,t===s.uN?(0,r.jsx)(f,{closeFormHandler:l}):null,t===s.Z3?(0,r.jsx)(g,{closeFormHandler:l}):null,t===s.zk?(0,r.jsx)(N,{closeFormHandler:l}):null,t===s.jq?(0,r.jsx)(I,{closeFormHandler:l,logOutHandler:i}):null,t===s.sO?(0,r.jsx)(k,{closeFormHandler:l,deleteAccHandler:i}):null,t===s.Ep?(0,r.jsx)(F,{closeFormHandler:l}):null]})})}},4535:function(){}}]);